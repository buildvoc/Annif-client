<!DOCTYPE html>
<html>
  <head>
    <title>Identify Building Height from a photo</title>
    <link
      rel="favicon.ico"
      type="image/jpg"
      href="https://building-height.co.uk/favicon.ico"
    />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

    <script src="/compressor.min.js"></script>
    <script src="/utils.js"></script>
    <script src="/exif-reader.js"></script>

    <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js"></script>

    <style type="text/css">
      .enable-post-to-vocabseditor {
        width: 30px;
        height: 30px;
        z-index: 10000000;
        border-radius: 50%;
      }

      .enable-post-to-vocabseditor button{
        appearance: none;
        width: 100%;
        height: 100%;
        margin-top: 1rem;
        background-color: red;
        border-radius: 50%;
        border: none;
        cursor: pointer;
      }

      .ui-selectmenu-button-text {
        visibility: hidden;
      }

      #results {
        list-style: none;
        padding-left: 7px;
      }

      #results li a {
        padding-left: 7px;
      }

      meter { 
        width: 24px;
        border: none;
        border-radius: 0;
        height: 18px;
        background-color: #ccc;
        box-shadow: 0 12px 3px -5px #e6e6e6 inset;
      }

      meter::-webkit-meter-bar {
        border: none;
        border-radius: 0;
        height: 18px;
        background-color: #ccc;
        box-shadow: 0 12px 3px -5px #e6e6e6 inset;
      }

      meter::-webkit-meter-optimum-value, meter::-moz-meter-optimum {
        background: #f5d085;
      }

      meter::-webkit-meter-suboptimum-value, meter::-moz-sub-optimum {
        background: #b4c365;
      }

      meter::-webkit-meter-even-less-good-value, meter::-moz-meter-sub-sub-optimum {
        background: #5cb85c;
      }

      .elipsis {
        white-space: nowrap; 
        width: 32px; 
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Loading screen */
      .ui-loading .ui-loader {
        display: block;
      }
      .ui-loader {
        display: none;
        z-index: 9999999;
        position: fixed;
        top: 50%;
        left: 50%;
        border-width: 0;
      }
      .ui-loader-default {
        background: none;
        filter: Alpha(Opacity=18);
        opacity: .18;
        width: 2.875em;
        height: 2.875em;
        margin-left: -1.4375em;
        margin-top: -1.4375em;
      }
      .ui-loader-verbose {
        width: 12.5em;
        filter: Alpha(Opacity=88);
        opacity: .88;
        box-shadow: 0 1px 1px -1px #fff;
        height: auto;
        margin-left: -6.875em;
        margin-top: -2.6875em;
        padding: .625em;
      }
      .ui-loader-default h1 {
        font-size: 0;
        width: 0;
        height: 0;
        overflow: hidden;
      }
      .ui-loader-verbose h1 {
        font-size: 1em;
        margin: 0;
        text-align: center;
      }
      .ui-loader .ui-icon-loading {
        background-color: #000;
        display: block;
        margin: 0;
        width: 2.75em;
        height: 2.75em;
        padding: .0625em;
        -webkit-border-radius: 2.25em;
        border-radius: 2.25em;
      }
      .ui-loader-verbose .ui-icon-loading {
        margin: 0 auto .625em;
        filter: Alpha(Opacity=75);
        opacity: .75;
      }
      .ui-loader-textonly {
        padding: .9375em;
        margin-left: -7.1875em;
      }
      .ui-loader-textonly .ui-icon-loading {
        display: none;
      }
      .ui-icon-loading {
          background: url(https://code.jquery.com/mobile/1.5.0-alpha.1/images/ajax-loader.gif);
          background-size: 2.875em 2.875em;
      }
      .metadata-results {
        display: block;
        margin-bottom: 15px;
      }
      .metadata-title {
        margin-bottom: 0;
      }
      .metadata-image {
        width: 250px;
        margin: 10px 0;
      }

      /*Text over image*/
      .img-text-container {
        position: relative;
      }
      .inner {
        position: absolute;
        top: 0%;
        background-color: rgba(0, 0, 0, 0.3);
        color: #fff;
        padding: 30px;
      }

      body { margin:0; padding:0; }
      #map { 
        position: absolute; 
        height: 100%;
        width: 100%; 
        top: 0;
        left: 0;
      }
      #building-height { 
        position: absolute; 
        width: 100%; 
        top: 300;
        left: 0;
        margin-top: 50px;
        margin-left: 16px;
      }

    </style>
    
    <script>

      var enablePostToVocabseditor = false;

      $(function () {
        const resizeObserver = new ResizeObserver((entries) => {
        const properHeight = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.body.clientHeight)
          $('.overlay-container').height(properHeight);
        })
        $('body').click(function (e) {
          if(!$('.overlay-container').hasClass('active'))
            return;
          if(!$(e.target).closest('.information-box').length && !$(e.target).is('.infotmation-box')) {
            $(".info-icon").click();
          }     
        });
        resizeObserver.observe($('.information-box')[0]);

        $(".text-button").on("click", function (e) {
          $('#previewtext').empty()
          $('.exif-table-body:first').clone().appendTo('#previewtext');
        });

        $(".copy-button").on("click", function () {
          selectElementContents();
        });
        $(".upload-button").on("click", function (e) {
          $("#imagefile-upload").click();
        });
        $("#imagefile-upload").on("click", function (e) {
          e.stopPropagation();
        });

        $('.info-icon').on('click', function(e){
          e.stopPropagation();
          $('.overlay-container').toggleClass('active');
        })
        $('.enable-post-to-vocabseditor button').on('click', function(e){
          if(enablePostToVocabseditor){
            e.target.style = `background-color: red;`;
            enablePostToVocabseditor = false;
          }
          else{
            e.target.style = `background-color: green;`;
            enablePostToVocabseditor = true;
          }
        });
      
        if (!supportsFileReader()) {
          alert('Sorry, your web browser does not support the FileReader API.');
          return;
        }

      });

      function supportsFileReader() {
        return window.FileReader !== undefined;
      }


      function handleImage(files) {

        //https://github.com/mattiasw/ExifReader

        window.exifReaderClear();

        $('.image-tab').click();

        const file = files[0];

            var img = document.getElementById("previewimg");
            var reader = new FileReader();
            reader.onload = (function (aImg) {
              return function (e) {
                aImg.src = e.target.result;
              };
            })(img);
            reader.readAsDataURL(file);


            ExifReader.load(file).then(function (tags) {
                // The MakerNote tag can be really large. Remove it to lower
                // memory usage if you're parsing a lot of files and saving the
                // tags.
                
                // delete tags['MakerNote'];

                // If you want to extract the thumbnail you can use it like
                // this:
                // if (tags['Thumbnail'] && tags['Thumbnail'].image) {
                //     var image = document.getElementById('thumbnail');
                //     image.classList.remove('hidden');
                //     image.src = 'data:image/jpg;base64,' + tags['Thumbnail'].base64;
                // }

                // Use the tags now present in `tags`.

                // >>> IGNORE: Helper code for interactive example.
                window.exifReaderListTags(tags);

                if (tags?.GPSLatitude?.description){
                  getPolygon(tags.GPSLatitude.description, tags.GPSLongitude.description);
                  setTimeout(() => {
                    $('.topics-tab').click();
                  }, 2000);
                }else{
                  alert("Image doesn't have gps");
                  return;
                }
            }).catch(function (error) {
                window.exifReaderError(error.toString());
            });
      }

      function getPolygon(lat, lon) {
        $.mobile.loading("show");
        let lng = lon;
        if (parseFloat(lon) > 0) lng = -Math.abs(parseFloat(lon));
        $.ajax({
          url: "https://api.buildingshistory.co.uk/api/v1/layer-sx/nearest?latitude="+parseFloat(lat)+"&longitude="+parseFloat(lng),
          method: "GET",
          success: function (data) {
            if (data.data.layer_sx.length > 0 && data.data.layer_sx[0].geojson) {
              loadPolygon(data.data.layer_sx[0].geojson, parseFloat(lat), parseFloat(lng));
              $("#RelHMax").text(data.data.layer_sx[0].rel_h_max + " m");
            }else{
              alert('No records found in our database');
            }

            $.mobile.loading("hide");
          },
        });

      }

      function loadPolygon(geojson, lat, lng){
        const apiKey = 'wCujufkC5D7bjVRTf5goHOSQSu8lLAbT';
        mapboxgl.accessToken = 'pk.eyJ1Ijoibm91ZmVsZ2hheWF0aSIsImEiOiJja3lmNWwwemEwOXNuMnhxcm9qNDF2ZXRhIn0.n0EDO6c611aAGh4r9-FwSg';

        const map = new mapboxgl.Map({
            container: 'map', // container ID
            style: 'https://api.os.uk/maps/vector/v1/vts/resources/styles?key=' + apiKey,
            center: [lng, lat],
            zoom: 3,
        });
        var centroidPt = turf.centroid(geojson);
        centroidPt.properties.title = 'label'; 

        map.on('style.load', () => {
            // Add a data source containing GeoJSON data.
            map.addSource('maine', {
              'type': 'geojson',
              'data': geojson
            });

            map.addSource('label', {
              'type': 'geojson',
              'data': centroidPt
            });

            map.addLayer({
                'id': 'maine',
                'type': 'fill',
                'source': 'maine',
                'layout': {},
                'paint': {
                    'fill-color': '#0080ff',
                    'fill-opacity': 0.1
                }
            });

            map.addLayer({
                'id': 'outline',
                'type': 'line',
                'source': 'maine',
                'layout': {},
                'paint': {
                    'line-color': 'red',
                    'line-width': 1
                }
            });

            map.addLayer({
                'id': 'label-style',
                'type': 'symbol',
                'source': 'label',
                'layout': {
                  'text-field': 'Label',
                  
                },
                'paint': {
                    'text-color': 'red'
                }
            });

        });
      }

      function selectElementContents() {
        var el = document.getElementById('previewtext');
        var body = document.body, range, sel;
        if (document.createRange && window.getSelection) {
            range = document.createRange();
            sel = window.getSelection();
            sel.removeAllRanges();
            try {
                range.selectNodeContents(el);
                sel.addRange(range);
            } catch (e) {
                range.selectNode(el);
                sel.addRange(range);
            }
        } else if (body.createTextRange) {
            range = body.createTextRange();
            range.moveToElementText(el);
            range.select();
        }
        document.execCommand("Copy");
      }
    
    </script>

  </head>
  <body>
    <div class="container-fluid d-flex flex-column min-vh-100 justify-content-center align-items-center">
      <div class="fixed-top">
        <button type="button" class="btn btn-primary btn-sm float-end m-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
          </svg>
        </button>
      </div>
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="image" role="tabpanel" aria-labelledby="image-tab" tabindex="0">
          <div class="row pt-4 ps-2 pe-2 pb-5 mb-5">
            <div class="col-12 mb-2">
              <div id="preview" class="img-text-container rounded" style="background: white;">
                <img id="previewimg" class="img-fluid opacity-75" />
                <div class="d-block d-sm-none">
                  <div class="bg-text">
                    <table class="tags">
                      <thead>
                          <tr>
                              <th class="tag-name"></th>
                              <th class="tag-description"></th>
                          </tr>
                      </thead>
                      <tbody class="exif-table-body">
                      </tbody>
                    </table>
                    <span class="error text-danger"></span>
                  </div>
                </div>
                <!--Dekstop-->
                <div class="d-none d-sm-block">
                  <div class="bg-text inner">
                    <table class="tags">
                      <thead>
                          <tr>
                              <th class="tag-name"></th>
                              <th class="tag-description"></th>
                          </tr>
                      </thead>
                      <tbody class="exif-table-body">
                      </tbody>
                    </table>
                    <span class="error text-danger"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="navbar fixed-bottom" style="padding-bottom: 112px;">
            <div class="container">
             <div class="row w-100 p-0 m-0">
              <div class="col-md-12">
               <div class="d-grid">
                 <label class="btn btn-secondary mb-3" for="imagefile">
                   <input
                     id="imagefile"
                     name="imagefile"
                     type="file"
                     accept="image/*"
                     capture="camera"
                     class="form-control d-none"
                     onchange="handleImage(this.files)"
                   />
                   <span class="d-block">
                     <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
                       <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/>
                       <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                     </svg>
                     Take a picture
                   </span>
                 </label>
               </div>
              </div>
             </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="topics" role="tabpanel" aria-labelledby="topics-tab" tabindex="0">
          <div class="row">
            <div class="col-12">
              <div id="map"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <div id="building-height">
                <br/>
                <h5>Building Height: <strong id="RelHMax"></strong></h5>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="text" role="tabpanel" aria-labelledby="text-tab" tabindex="0">
          <div class="row pt-4 ps-2 pe-2 pb-5 mb-5">
            <div class="col-12 mb-2">
              <span class="error text-danger"></span>
              <table id="previewtext" class="bg-light p-2">
                <thead>
                  <tr>
                      <th>Tag name</th>
                      <th>Tag description</th>
                  </tr>
                </thead>
                <tbody id="result-tbody">
                </tbody>
              </table>
              <input class="btn btn-sm btn-secondary float-end" type="button" value="Copy to Clipboard" onclick="selectElementContents();" />
            </div>
          </div>
        </div>

      </div>


     <nav class="navbar fixed-bottom bg-light border navbar-expand p-0 d-block d-sm-none">
      <ul class="nav nav-pills nav-justified w-100 row p-0 m-0" id="pills-tab" role="tablist">
        <div class="col-3 p-0 m-0">
          <li class="nav-item capture-button" role="presentation">
            <button title="Capture an image" class="nav-link text-center active image-tab" id="image-tab" data-bs-toggle="pill" data-bs-target="#image" type="button" role="tab" aria-controls="image" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
                <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/>
                <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
              </svg>
              <span class="small d-block" style="font-size: 0.6em;">Capture</span>
            </button>
          </li>
        </div>
        <div class="col-3 p-0 m-0">
          <li class="nav-item copy-button" role="presentation">
            <button title="Result" class="nav-link text-center topics-tab" id="topics-tab" data-bs-toggle="pill" data-bs-target="#topics" type="button" role="tab" aria-controls="topics" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
              </svg>
              <span class="small d-block"  style="font-size: 0.6em;">Result</span>
            </button>
          </li>
        </div>
        <div class="col-3 p-0 m-0">
          <li class="nav-item text-button" role="presentation">
            <button title="Show Extracted Metadata" class="nav-link text-center  text-tab" id="text-tab" data-bs-toggle="pill" data-bs-target="#text" type="button" role="tab" aria-controls="text" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-upc-scan" viewBox="0 0 16 16">
                <path d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/>
              </svg>
              <span class="small d-block"  style="font-size: 0.6em;">Metadata</span>
            </button>
          </li>
        </div>
        <div class="col-3 p-0 m-0">
          <li class="nav-item " title="Upload an image" role="presentation">
            <label class="btn nav-link text-center " for="imagefile-upload">
              <input
                id="imagefile-upload"
                name="imagefile"
                type="file"
                accept="image/*"
                class="form-control d-none"
                onchange="handleImage(this.files)"
              />
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
              </svg>
              <span class="small d-block"  style="font-size: 0.6em;">Upload</span>
            </label>
          </li>
        </div>
      </ul>
     </nav>

     <!--Dekstop-->
     <nav class="navbar fixed-bottom bg-light border navbar-expand p-0 d-none d-sm-block">
      <ul class="nav nav-pills nav-justified w-100" id="pills-tab" role="tablist">

          <li class="nav-item capture-button" role="presentation">
            <button title="Capture an image" class="nav-link active image-tab" id="image-tab" data-bs-toggle="pill" data-bs-target="#image" type="button" role="tab" aria-controls="image" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
                <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/>
                <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
              </svg>
              <span class="d-block" >Take a picture</span>
            </button>
          </li>

          <li class="nav-item  topics-button" role="presentation">
            <button title="Building Height" class="nav-link topics-tab" id="topics-tab" data-bs-toggle="pill" data-bs-target="#topics" type="button" role="tab" aria-controls="topics" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
                <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"/>
                <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"/>
              </svg>
              <span class="d-block"  >Building Height</span>
            </button>
          </li>

          <li class="nav-item  text-button" role="presentation">
            <button title="Show Extracted Metadata" class="nav-link text-tab" id="text-tab" data-bs-toggle="pill" data-bs-target="#text" type="button" role="tab" aria-controls="text" aria-selected="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-upc-scan" viewBox="0 0 16 16">
                <path d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/>
              </svg>
              <span class="d-block"  >Extracted Metadata</span>
            </button>
          </li>

          <li class="nav-item  upload-buttonnn" title="Upload an image" role="presentation">
            <label class="btn nav-link" for="imagefile-upload">
              <input
                id="imagefile-upload"
                name="imagefile"
                type="file"
                accept="image/*"
                class="form-control d-none"
              />
              <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
              </svg>
              <span class="d-block"  >Upload</span>
            </label>
          </li>

      </ul>
     </nav>

    </div>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="exampleModalLabel">Test a prototype for Fire Safety Analytics</h2>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="information-box">
              <p>This app was made available to you free of charge  by Phil Stacey with the support from <b><a style="text-decoration: none" href="https://www.digitalocean.com/"> DigitalOcean.</a></b></p>
              <p>The purpose of the app is to showcase machine learning algorithms that analyse and <b>converts a picture -> to text -> to structured data.</b></p>                              

              <p>
                <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-camera" viewBox="0 0 16 16">
                  <path d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1v6zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2z"/>
                  <path d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5zm0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zM3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"/>
                </svg>
                 <b>a)</b> Take a picture of a fire safety document using your mobile phone Then the app will automatically:</p>
              <ul class="icons-information-list" style="list-style-type:none; padding: 0">
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-upc-scan" viewBox="0 0 16 16">
                    <path d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/>
                  </svg>
                  <b>b)</b> Convert it to text using Optical Character Recognition (OCR) technology
                </li>
                <li style="margin: 1rem 0;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
                    <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"/>
                    <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"/>
                  </svg>
                   <b>c)</b> Analyse the text using <b><a style="text-decoration: none" href="https://annif.org/">Annif</a></b>
                </li>
                <li style="margin: 1rem 0;">
                   Set of suggested subjects with links to <b><a style="text-decoration: none" href="https://data-dictionary.buildvoc.co.uk/buildvoc/en/">Buildvoc's data dictionary. </b></a>
                </li>
                <li style="margin: 1rem 0;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                    <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                  </svg>
                  Upload a screenshot
                </li>
                <li style="margin: 1rem 0;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-bar-chart-line" viewBox="0 0 16 16">
                    <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-5 0v-3H2v3h2z"/>
                  </svg>
                  Take a picture of the first presentation slide, then second slide next press 
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-upc-scan" viewBox="0 0 16 16">
                    <path d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z"/>
                  </svg>
                  See captured text
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
                    <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"/>
                    <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2v4.586z"/>
                  </svg>
                  to see suggested subjects
                </li>
                <li style="margin: 1rem 0;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                  </svg>
                  Copy text and suggested subjects to notes
                </li>
                <li style="margin: 1rem 0;">
				  <li><b>Additional Information</b>
                  <li><b><a style="text-decoration: none" href="https://skosmos.org/">Skosmos</a></b>
				  <li><b><a style="text-decoration: none" href="https://en.wikipedia.org/wiki/Tesseract_(software)">Tesseract</a></b>
				  <li><b><a style="text-decoration: none" href="https://annif.org/">Annif</a></b>
				  (Tool for automated subject indexing and classification)
                </li>
              </ul>
              <div class="enable-post-to-vocabseditor" title="Enable posting to vocabseditor.">
                <button></button>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

  </body>
</html>
